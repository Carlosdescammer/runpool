<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RunPool ‚Äî Settings</title>
<style>
  :root{
    --bg:#0d1220;--panel:#161b2e;--panel2:#12172a;--text:#e8ecff;--muted:#98a4bb;
    --line:#273054;--chip:#232a46;--accent:#7aa2ff;--success:#33d18f;--danger:#ff6b6b;
    --focus:#3d63ff88;--radius:16px;--shadow:0 10px 24px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.03)
  }
  *{box-sizing:border-box}
  body{
    margin:0; color:var(--text); background: radial-gradient(1200px 600px at 10% -10%, #152043 0%, transparent 60%), var(--bg);
    font:14px/1.45 Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
  }
  .wrap{max-width:1050px; margin:40px auto; padding:0 20px}
  .topbar{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:18px}
  .brand{display:flex; align-items:center; gap:12px}
  .logo{width:28px;height:28px;border-radius:8px;background:radial-gradient(circle at 25% 25%,#7af8d0,#3ce5a2 55%,#1fb275 100%);box-shadow:0 6px 18px rgba(31,178,117,.4)}
  .brand h1{font-size:18px;margin:0}
  .btn{
    border:1px solid var(--line); background:linear-gradient(180deg,var(--panel),var(--panel2)); color:var(--text);
    padding:10px 14px; border-radius:999px; cursor:pointer; box-shadow:var(--shadow);
    transition:transform .05s ease,border-color .2s ease, background .2s ease;
  }
  .btn:hover{transform:translateY(-1px); border-color:#3b4b7a}
  .btn:focus-visible{outline:none; box-shadow:0 0 0 4px var(--focus)}
  .btn.primary{background:linear-gradient(180deg,#39e19b,#22c67f); color:#04140d; border-color:transparent}
  .btn.danger{background:linear-gradient(180deg,#ff8585,#fa6d6d); color:#2b0a0a; border-color:transparent}
  .btn.ghost{background:transparent}
  .pill{background:#102338;border:1px solid #2a3860;color:#c8d3ee;padding:6px 10px;border-radius:999px;font-size:12px;white-space:nowrap}

  .card{background:linear-gradient(180deg,var(--panel),var(--panel2)); border:1px solid var(--line); border-radius:var(--radius); box-shadow:var(--shadow); margin-bottom:18px}
  .card .inner{padding:18px}
  .card h2{margin:0 0 14px; font-size:16px}
  .row{display:flex; gap:12px; flex-wrap:wrap}
  .grid-2{display:grid; grid-template-columns:1fr 1fr; gap:12px}
  @media (max-width: 800px){ .grid-2{grid-template-columns:1fr} }

  label{display:block; font-weight:600; margin-bottom:6px}
  .field{background:#0f1530; border:1px solid #36406a; color:#cfe0ff; padding:11px 12px; border-radius:12px; width:100%}
  select.field{appearance:none; background-image:
     linear-gradient(45deg, transparent 50%, #8aa0ff 50%),
     linear-gradient(135deg, #8aa0ff 50%, transparent 50%),
     linear-gradient(to right, transparent, transparent);
     background-position: calc(100% - 22px) calc(50% - 3px), calc(100% - 14px) calc(50% - 3px), 100% 0;
     background-size: 8px 8px, 8px 8px, 2.5em 2.5em; background-repeat:no-repeat;
  }
  .muted{color:var(--muted); font-size:12px}
  .divider{height:1px; background:var(--line); margin:16px 0}

  /* Switch */
  .switch{position:relative; width:44px; height:26px; background:#223052; border:1px solid #36406a; border-radius:999px; cursor:pointer; flex:0 0 auto}
  .switch span{position:absolute; top:2px; left:2px; width:20px; height:20px; background:#cfdaf6; border-radius:50%; transition:left .18s ease}
  .switch[data-on="true"]{background:#1fbf82; border-color:#1fbf82}
  .switch[data-on="true"] span{left:22px; background:#0a241a}

  /* Inline list items */
  .inline{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:12px; border:1px solid var(--line); border-radius:12px; background:#0f1427}
  .code{background:#0f1530; border:1px dashed #36406a; color:#b9c3de; padding:12px; border-radius:12px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; overflow:auto; white-space:nowrap}
  .chip{display:inline-flex; align-items:center; gap:8px; font-size:12px; color:#cbd3e8; background:var(--chip); border:1px solid var(--line); padding:6px 10px; border-radius:999px}
  .danger-zone{border:1px solid #52323a; background:linear-gradient(180deg,#1b1116,#160d12);}

  /* Table-ish members */
  .member{display:flex; align-items:center; gap:12px; padding:12px; border:1px solid var(--line); border-radius:12px; background:#0f1427}
  .ava{display:grid; place-items:center; width:30px; height:30px; border-radius:999px; background:#1f2746; color:#fff; font-weight:700; border:1px solid #2a3560}
  .role{display:flex; gap:10px; align-items:center; color:#dbe2ff}
  .role small{color:var(--muted)}
  .right{margin-left:auto; display:flex; gap:8px; align-items:center}

  /* Toast */
  .toast{position:fixed; inset:auto 20px 20px auto; background:#0b182c; border:1px solid #2a3860; color:#d7e3ff; padding:12px 14px; border-radius:10px; box-shadow:var(--shadow); opacity:0; transform:translateY(8px); transition:opacity .18s ease, transform .18s ease; z-index:50}
  .toast.show{opacity:1; transform:translateY(0)}

  /* Section headings */
  .section-title{display:flex; align-items:center; justify-content:space-between; gap:12px}
</style>
</head>
<body>
  <div class="wrap">
    <!-- Topbar -->
    <div class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <h1>RunPool</h1>
        <span class="pill">Settings</span>
      </div>
      <div class="row">
        <a class="btn ghost" href="./index.html">‚Üê Back to Dashboard</a>
        <button class="btn">Help</button>
        <button class="btn primary">Sign Out</button>
      </div>
    </div>

    <!-- Manage group selector -->
    <section class="card">
      <div class="inner">
        <label for="groupSelect">Select a group to manage</label>
        <select id="groupSelect" class="field">
          <option>Past Our Prime</option>
          <option>Early Risers</option>
          <option>PB Track Crew</option>
        </select>
      </div>
    </section>

    <!-- Group Settings -->
    <section class="card">
      <div class="inner">
        <h2>Group Settings</h2>
        <div class="grid-2">
          <div>
            <label for="gname">Name</label>
            <input id="gname" class="field" value="Past Our Prime"/>
          </div>
          <div>
            <label for="fee">Entry Fee ($)</label>
            <input id="fee" type="number" min="0" step="1" class="field" value="10"/>
          </div>
          <div style="grid-column:1 / -1">
            <label for="rule">Weekly rule</label>
            <input id="rule" class="field" value="Run at least five total miles for the week."/>
          </div>
          <div class="inline" style="grid-column:1 / -1">
            <div>
              <div style="font-weight:600">Instant email on miles</div>
              <div class="muted">Email the group when a member logs miles</div>
            </div>
            <div class="switch" id="switchEmails" role="switch" aria-checked="true" tabindex="0" data-on="true"><span></span></div>
          </div>
        </div>
        <div class="divider"></div>
        <button class="btn primary" id="saveSettings">Save Settings</button>
      </div>
    </section>

    <!-- Create New Week -->
    <section class="card">
      <div class="inner">
        <h2>Create New Week</h2>
        <div class="grid-2">
          <div>
            <label for="pot">Pot ($)</label>
            <input id="pot" type="number" min="0" step="1" class="field" value="10"/>
          </div>
          <div></div>
          <div>
            <label for="wstart">Week start</label>
            <input id="wstart" type="date" class="field" value="2025-09-06"/>
          </div>
          <div>
            <label for="wend">Week end</label>
            <input id="wend" type="date" class="field" value="2025-09-12"/>
          </div>
        </div>
        <div class="divider"></div>
        <button class="btn" id="createWeek">Create Week</button>
      </div>
    </section>

    <!-- Invite Links -->
    <section class="card">
      <div class="inner">
        <h2>Invite Links</h2>

        <div class="inline" style="margin-bottom:12px">
          <div>
            <div style="font-weight:600">Create Invite Link</div>
            <div class="muted">Generate a shareable link that anyone can use to join your group.</div>
          </div>
          <button class="btn" id="newInvite">Create New Invite Link</button>
        </div>

        <div id="invites">
          <div class="inline" data-token="ee6b0775d22b4a5da55a758e4fd3dc6d" style="margin-bottom:10px">
            <div class="code">http://localhost:3000/join?token=ee6b0775d22b4a5da55a758e4fd3dc6d</div>
            <div class="right">
              <button class="btn" data-copy>Copy</button>
              <button class="btn ghost" data-revoke>Revoke</button>
            </div>
          </div>
          <div class="inline" data-token="b78471569852848cba046466c7873f45d">
            <div class="code">http://localhost:3000/join?token=b78471569852848cba046466c7873f45d</div>
            <div class="right">
              <button class="btn" data-copy>Copy</button>
              <button class="btn ghost" data-revoke>Revoke</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Group Members -->
    <section class="card">
      <div class="inner">
        <div class="section-title">
          <h2 style="margin:0">Group Members</h2>
          <button class="btn" id="refreshMembers">Refresh</button>
        </div>

        <div class="member" data-id="me">
          <div class="ava">J</div>
          <div>
            <div style="font-weight:700">Jean (You) <span class="pill">Admin</span></div>
            <div class="muted">üß≠ Runner ¬∑ üí∞ Banker</div>
          </div>
          <div class="right">
            <span class="chip">üèÜ 3 wins</span>
          </div>
        </div>

        <div class="member" data-id="f1" style="margin-top:10px">
          <div class="ava">F</div>
          <div>
            <div style="font-weight:700">Fighting for my life</div>
            <div class="muted">üß≠ Runner ¬∑ üí∞ Banker</div>
          </div>
          <div class="right">
            <button class="btn ghost" data-remove>Remove</button>
          </div>
        </div>

        <div class="member" data-id="javi" style="margin-top:10px">
          <div class="ava">J</div>
          <div>
            <div style="font-weight:700">Javi</div>
            <div class="muted">üß≠ Runner ¬∑ üí∞ Banker</div>
          </div>
          <div class="right">
            <button class="btn ghost" data-remove>Remove</button>
          </div>
        </div>

        <div class="member" data-id="adrian" style="margin-top:10px">
          <div class="ava">A</div>
          <div>
            <div style="font-weight:700">Adrian</div>
            <div class="muted">üß≠ Runner ¬∑ üí∞ Banker</div>
          </div>
          <div class="right">
            <button class="btn ghost" data-remove>Remove</button>
          </div>
        </div>

        <div class="divider"></div>

        <section class="card danger-zone">
          <div class="inner">
            <h2 style="margin:0 0 6px">Danger Zone</h2>
            <div class="muted" style="margin-bottom:12px">Deleting the group is a permanent action and cannot be undone.</div>
            <button class="btn danger" id="deleteGroup">Delete Group</button>
          </div>
        </section>
      </div>
    </section>

    <!-- Email Notifications -->
    <section class="card">
      <div class="inner">
        <h2>Email Notifications</h2>
        <div class="muted" style="margin-bottom:12px">Choose which email notifications you'd like to receive.</div>

        <div id="prefs">
          <!-- preference items (label + switch) -->
          <div class="inline" data-key="weekly_goal" style="margin-bottom:8px">
            <div><div style="font-weight:600">Weekly goal reminders</div><div class="muted">Get reminded when you're behind on your weekly mileage goal</div></div>
            <div class="switch" role="switch" aria-checked="true" tabindex="0" data-on="true"><span></span></div>
          </div>

          <div class="inline" data-key="top_performer" style="margin-bottom:8px">
            <div><div style="font-weight:600">Top performer alerts</div><div class="muted">Get notified when you enter the top 3 rankings</div></div>
            <div class="switch" role="switch" aria-checked="true" tabindex="0" data-on="true"><span></span></div>
          </div>

          <div class="inline" data-key="top3_milestone" style="margin-bottom:8px">
            <div><div style="font-weight:600">Top 3 milestone notifications</div><div class="muted">Get notified when top 3 performers log new miles</div></div>
            <div class="switch" role="switch" aria-checked="true" tabindex="0" data-on="true"><span></span></div>
          </div>

          <div class="inline" data-key="activity" style="margin-bottom:8px">
            <div><div style="font-weight:600">Activity notifications</div><div class="muted">Get notified when other group members log miles</div></div>
            <div class="switch" role="switch" aria-checked="true" tabindex="0" data-on="true"><span></span></div>
          </div>

          <div class="inline" data-key="new_member" style="margin-bottom:8px">
            <div><div style="font-weight:600">New member alerts (Admin only)</div><div class="muted">Get notified when new users join groups you admin</div></div>
            <div class="switch" role="switch" aria-checked="true" tabindex="0" data-on="true"><span></span></div>
          </div>

          <div class="inline" data-key="weekly_recap" style="margin-bottom:8px">
            <div><div style="font-weight:600">Weekly recap emails</div><div class="muted">Receive weekly summaries of group performance</div></div>
            <div class="switch" role="switch" aria-checked="false" tabindex="0" data-on="false"><span></span></div>
          </div>

          <div class="inline" data-key="invites">
            <div><div style="font-weight:600">Invite notifications</div><div class="muted">Receive group invitations and related emails</div></div>
            <div class="switch" role="switch" aria-checked="true" tabindex="0" data-on="true"><span></span></div>
          </div>
        </div>

        <div class="divider"></div>
        <button class="btn primary" id="savePrefs">Save Preferences</button>
      </div>
    </section>

    <!-- Security -->
    <section class="card">
      <div class="inner">
        <h2>Security</h2>
        <div class="grid-2">
          <div>
            <label for="curpass">Current password</label>
            <input id="curpass" type="password" class="field" placeholder="Enter current password"/>
          </div>
          <div></div>
          <div>
            <label for="newpass">New password</label>
            <input id="newpass" type="password" class="field" placeholder="Enter new password"/>
          </div>
          <div>
            <label for="confpass">Confirm new password</label>
            <input id="confpass" type="password" class="field" placeholder="Confirm new password"/>
          </div>
        </div>
        <div class="divider"></div>
        <button class="btn" id="changePass">Change Password</button>
      </div>
    </section>

    <!-- Account -->
    <section class="card">
      <div class="inner">
        <h2>Account</h2>
        <div class="inline">
          <div>
            <div class="muted">Signed in as</div>
            <div style="font-weight:600">orelien.j.coti@gmail.com</div>
          </div>
          <button class="btn">Sign Out</button>
        </div>
      </div>
    </section>

  </div>

  <div class="toast" id="toast" role="status" aria-live="polite">Saved</div>

<script>
  const toast = (msg='Saved')=>{
    const t=document.getElementById('toast'); t.textContent=msg; t.classList.add('show');
    setTimeout(()=>t.classList.remove('show'),1300);
  };

  // Toggle switch behavior (click or Space/Enter)
  function bindSwitch(sw){
    const set = (on)=>{ sw.dataset.on = on; sw.setAttribute('aria-checked', on); };
    sw.addEventListener('click', ()=> set(!(sw.dataset.on==='true')));
    sw.addEventListener('keydown', (e)=>{ if(e.key===' '||e.key==='Enter'){ e.preventDefault(); set(!(sw.dataset.on==='true')); }});
  }
  document.querySelectorAll('.switch').forEach(bindSwitch);

  // Save settings (optimistic)
  document.getElementById('saveSettings').addEventListener('click', ()=>{
    // collect values (would POST to API)
    const payload = {
      group: document.getElementById('groupSelect').value,
      name: document.getElementById('gname').value,
      fee: +document.getElementById('fee').value,
      rule: document.getElementById('rule').value,
      instant_email: document.getElementById('switchEmails').dataset.on==='true'
    };
    console.log('SAVE SETTINGS', payload);
    toast('Settings saved ‚úÖ');
  });

  // Create week (optimistic)
  document.getElementById('createWeek').addEventListener('click', ()=>{
    const p = +document.getElementById('pot').value;
    const s = document.getElementById('wstart').value;
    const e = document.getElementById('wend').value;
    console.log('CREATE WEEK', {p,s,e});
    toast('Week created ‚úÖ');
  });

  // Invite links: copy & revoke
  const invites = document.getElementById('invites');
  invites.addEventListener('click', async (e)=>{
    const row = e.target.closest('.inline');
    if(!row) return;

    if(e.target.matches('[data-copy]')){
      const url = row.querySelector('.code').textContent.trim();
      try{ await navigator.clipboard.writeText(url); e.target.textContent='Copied ‚úÖ'; setTimeout(()=>e.target.textContent='Copy',1000); }
      catch{ alert(url); }
    }
    if(e.target.matches('[data-revoke]')){
      row.style.opacity=.6; setTimeout(()=>row.remove(),250); toast('Invite revoked');
    }
  });

  // Create new invite
  document.getElementById('newInvite').addEventListener('click', ()=>{
    const token = Math.random().toString(16).slice(2)+Date.now().toString(16);
    const url = `http://localhost:3000/join?token=${token}`;
    const div = document.createElement('div');
    div.className='inline'; div.style.marginBottom='10px'; div.dataset.token=token;
    div.innerHTML = `
      <div class="code">${url}</div>
      <div class="right">
        <button class="btn" data-copy>Copy</button>
        <button class="btn ghost" data-revoke>Revoke</button>
      </div>`;
    invites.prepend(div);
    toast('Invite created');
  });

  // Remove member (non-admin)
  document.querySelectorAll('[data-remove]').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const row = btn.closest('.member'); row.style.opacity=.6; setTimeout(()=>row.remove(),220); toast('Member removed');
    });
  });

  // Delete group (confirm)
  document.getElementById('deleteGroup').addEventListener('click', ()=>{
    if(confirm('Delete this group? This cannot be undone.')){
      toast('Group deleted'); // redirect would happen here
    }
  });

  // Save Email Preferences
  document.getElementById('savePrefs').addEventListener('click', ()=>{
    const prefs = {};
    document.querySelectorAll('#prefs .inline').forEach(item=>{
      const key=item.dataset.key; const on=item.querySelector('.switch').dataset.on==='true'; prefs[key]=on;
    });
    console.log('SAVE PREFS', prefs);
    toast('Preferences saved ‚úÖ');
  });

  // Change password (client side demo)
  document.getElementById('changePass').addEventListener('click', ()=>{
    const cur=document.getElementById('curpass').value;
    const n=document.getElementById('newpass').value;
    const c=document.getElementById('confpass').value;
    if(!cur||!n||!c) return toast('Fill all password fields');
    if(n!==c) return toast('Passwords do not match');
    toast('Password updated ‚úÖ');
  });

  // Refresh members (mock)
  document.getElementById('refreshMembers').addEventListener('click', ()=> toast('Members refreshed'));
</script>
</body>
</html>
